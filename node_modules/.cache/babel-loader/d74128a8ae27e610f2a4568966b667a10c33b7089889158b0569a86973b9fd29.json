{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetcher = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst qs_1 = __importDefault(require(\"qs\"));\nconst INITIAL_RETRY_DELAY = 1;\nconst MAX_RETRY_DELAY = 60;\nconst DEFAULT_MAX_RETRIES = 2;\nfunction fetcherImpl(args) {\n  var _a, _b;\n  return __awaiter(this, void 0, void 0, function* () {\n    const headers = {};\n    if (args.body !== undefined && args.contentType != null) {\n      headers[\"Content-Type\"] = args.contentType;\n    }\n    if (args.headers != null) {\n      for (const [key, value] of Object.entries(args.headers)) {\n        if (value != null) {\n          headers[key] = value;\n        }\n      }\n    }\n    const makeRequest = () => __awaiter(this, void 0, void 0, function* () {\n      var _d;\n      return yield (0, axios_1.default)({\n        url: args.url,\n        params: args.queryParameters,\n        paramsSerializer: params => {\n          return qs_1.default.stringify(params, {\n            arrayFormat: \"repeat\"\n          });\n        },\n        method: args.method,\n        headers,\n        data: args.body,\n        validateStatus: () => true,\n        transformResponse: response => response,\n        timeout: args.timeoutMs,\n        transitional: {\n          clarifyTimeoutError: true\n        },\n        withCredentials: args.withCredentials,\n        adapter: args.adapter,\n        onUploadProgress: args.onUploadProgress,\n        maxBodyLength: Infinity,\n        maxContentLength: Infinity,\n        responseType: (_d = args.responseType) !== null && _d !== void 0 ? _d : \"json\"\n      });\n    });\n    try {\n      let response = yield makeRequest();\n      for (let i = 0; i < ((_a = args.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_MAX_RETRIES); ++i) {\n        if (response.status === 408 || response.status === 409 || response.status === 429 || response.status >= 500) {\n          const delay = Math.min(INITIAL_RETRY_DELAY * Math.pow(i, 2), MAX_RETRY_DELAY);\n          response = yield new Promise(resolve => setTimeout(resolve, delay));\n        } else {\n          break;\n        }\n      }\n      let body;\n      if (args.responseType === \"blob\") {\n        body = response.data;\n      } else if (response.data != null && response.data.length > 0) {\n        try {\n          body = (_b = JSON.parse(response.data)) !== null && _b !== void 0 ? _b : undefined;\n        } catch (_c) {\n          return {\n            ok: false,\n            error: {\n              reason: \"non-json\",\n              statusCode: response.status,\n              rawBody: response.data\n            }\n          };\n        }\n      }\n      if (response.status >= 200 && response.status < 400) {\n        return {\n          ok: true,\n          body: body\n        };\n      } else {\n        return {\n          ok: false,\n          error: {\n            reason: \"status-code\",\n            statusCode: response.status,\n            body\n          }\n        };\n      }\n    } catch (error) {\n      if (error.code === \"ETIMEDOUT\") {\n        return {\n          ok: false,\n          error: {\n            reason: \"timeout\"\n          }\n        };\n      }\n      return {\n        ok: false,\n        error: {\n          reason: \"unknown\",\n          errorMessage: error.message\n        }\n      };\n    }\n  });\n}\nexports.fetcher = fetcherImpl;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","Object","defineProperty","exports","fetcher","axios_1","require","qs_1","INITIAL_RETRY_DELAY","MAX_RETRY_DELAY","DEFAULT_MAX_RETRIES","fetcherImpl","args","_a","_b","headers","body","undefined","contentType","key","entries","makeRequest","_d","default","url","params","queryParameters","paramsSerializer","stringify","arrayFormat","method","data","validateStatus","transformResponse","response","timeout","timeoutMs","transitional","clarifyTimeoutError","withCredentials","adapter","onUploadProgress","maxBodyLength","Infinity","maxContentLength","responseType","i","maxRetries","status","delay","Math","min","pow","setTimeout","length","JSON","parse","_c","ok","error","reason","statusCode","rawBody","code","errorMessage","message"],"sources":["D:/projects/InterviewCoachWeb/node_modules/cohere-ai/core/fetcher/Fetcher.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetcher = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst qs_1 = __importDefault(require(\"qs\"));\nconst INITIAL_RETRY_DELAY = 1;\nconst MAX_RETRY_DELAY = 60;\nconst DEFAULT_MAX_RETRIES = 2;\nfunction fetcherImpl(args) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = {};\n        if (args.body !== undefined && args.contentType != null) {\n            headers[\"Content-Type\"] = args.contentType;\n        }\n        if (args.headers != null) {\n            for (const [key, value] of Object.entries(args.headers)) {\n                if (value != null) {\n                    headers[key] = value;\n                }\n            }\n        }\n        const makeRequest = () => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            return yield (0, axios_1.default)({\n                url: args.url,\n                params: args.queryParameters,\n                paramsSerializer: (params) => {\n                    return qs_1.default.stringify(params, { arrayFormat: \"repeat\" });\n                },\n                method: args.method,\n                headers,\n                data: args.body,\n                validateStatus: () => true,\n                transformResponse: (response) => response,\n                timeout: args.timeoutMs,\n                transitional: {\n                    clarifyTimeoutError: true,\n                },\n                withCredentials: args.withCredentials,\n                adapter: args.adapter,\n                onUploadProgress: args.onUploadProgress,\n                maxBodyLength: Infinity,\n                maxContentLength: Infinity,\n                responseType: (_d = args.responseType) !== null && _d !== void 0 ? _d : \"json\",\n            });\n        });\n        try {\n            let response = yield makeRequest();\n            for (let i = 0; i < ((_a = args.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_MAX_RETRIES); ++i) {\n                if (response.status === 408 ||\n                    response.status === 409 ||\n                    response.status === 429 ||\n                    response.status >= 500) {\n                    const delay = Math.min(INITIAL_RETRY_DELAY * Math.pow(i, 2), MAX_RETRY_DELAY);\n                    response = yield new Promise((resolve) => setTimeout(resolve, delay));\n                }\n                else {\n                    break;\n                }\n            }\n            let body;\n            if (args.responseType === \"blob\") {\n                body = response.data;\n            }\n            else if (response.data != null && response.data.length > 0) {\n                try {\n                    body = (_b = JSON.parse(response.data)) !== null && _b !== void 0 ? _b : undefined;\n                }\n                catch (_c) {\n                    return {\n                        ok: false,\n                        error: {\n                            reason: \"non-json\",\n                            statusCode: response.status,\n                            rawBody: response.data,\n                        },\n                    };\n                }\n            }\n            if (response.status >= 200 && response.status < 400) {\n                return {\n                    ok: true,\n                    body: body,\n                };\n            }\n            else {\n                return {\n                    ok: false,\n                    error: {\n                        reason: \"status-code\",\n                        statusCode: response.status,\n                        body,\n                    },\n                };\n            }\n        }\n        catch (error) {\n            if (error.code === \"ETIMEDOUT\") {\n                return {\n                    ok: false,\n                    error: {\n                        reason: \"timeout\",\n                    },\n                };\n            }\n            return {\n                ok: false,\n                error: {\n                    reason: \"unknown\",\n                    errorMessage: error.message,\n                },\n            };\n        }\n    });\n}\nexports.fetcher = fetcherImpl;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}