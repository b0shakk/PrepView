{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.list = void 0;\nconst Schema_1 = require(\"../../Schema\");\nconst getErrorMessageForIncorrectType_1 = require(\"../../utils/getErrorMessageForIncorrectType\");\nconst maybeSkipValidation_1 = require(\"../../utils/maybeSkipValidation\");\nconst schema_utils_1 = require(\"../schema-utils\");\nfunction list(schema) {\n  const baseSchema = {\n    parse: (raw, opts) => __awaiter(this, void 0, void 0, function* () {\n      return validateAndTransformArray(raw, (item, index) => {\n        var _a;\n        return schema.parse(item, Object.assign(Object.assign({}, opts), {\n          breadcrumbsPrefix: [...((_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : []), `[${index}]`]\n        }));\n      });\n    }),\n    json: (parsed, opts) => validateAndTransformArray(parsed, (item, index) => {\n      var _a;\n      return schema.json(item, Object.assign(Object.assign({}, opts), {\n        breadcrumbsPrefix: [...((_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : []), `[${index}]`]\n      }));\n    }),\n    getType: () => Schema_1.SchemaType.LIST\n  };\n  return Object.assign(Object.assign({}, (0, maybeSkipValidation_1.maybeSkipValidation)(baseSchema)), (0, schema_utils_1.getSchemaUtils)(baseSchema));\n}\nexports.list = list;\nfunction validateAndTransformArray(value, transformItem) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (!Array.isArray(value)) {\n      return {\n        ok: false,\n        errors: [{\n          message: (0, getErrorMessageForIncorrectType_1.getErrorMessageForIncorrectType)(value, \"list\"),\n          path: []\n        }]\n      };\n    }\n    const maybeValidItems = yield Promise.all(value.map((item, index) => transformItem(item, index)));\n    return maybeValidItems.reduce((acc, item) => {\n      if (acc.ok && item.ok) {\n        return {\n          ok: true,\n          value: [...acc.value, item.value]\n        };\n      }\n      const errors = [];\n      if (!acc.ok) {\n        errors.push(...acc.errors);\n      }\n      if (!item.ok) {\n        errors.push(...item.errors);\n      }\n      return {\n        ok: false,\n        errors\n      };\n    }, {\n      ok: true,\n      value: []\n    });\n  });\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","list","Schema_1","require","getErrorMessageForIncorrectType_1","maybeSkipValidation_1","schema_utils_1","schema","baseSchema","parse","raw","opts","validateAndTransformArray","item","index","_a","assign","breadcrumbsPrefix","json","parsed","getType","SchemaType","LIST","maybeSkipValidation","getSchemaUtils","transformItem","Array","isArray","ok","errors","message","getErrorMessageForIncorrectType","path","maybeValidItems","all","map","reduce","acc","push"],"sources":["D:/projects/InterviewCoachWeb/node_modules/cohere-ai/core/schemas/builders/list/list.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.list = void 0;\nconst Schema_1 = require(\"../../Schema\");\nconst getErrorMessageForIncorrectType_1 = require(\"../../utils/getErrorMessageForIncorrectType\");\nconst maybeSkipValidation_1 = require(\"../../utils/maybeSkipValidation\");\nconst schema_utils_1 = require(\"../schema-utils\");\nfunction list(schema) {\n    const baseSchema = {\n        parse: (raw, opts) => __awaiter(this, void 0, void 0, function* () {\n            return validateAndTransformArray(raw, (item, index) => {\n                var _a;\n                return schema.parse(item, Object.assign(Object.assign({}, opts), { breadcrumbsPrefix: [...((_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : []), `[${index}]`] }));\n            });\n        }),\n        json: (parsed, opts) => validateAndTransformArray(parsed, (item, index) => {\n            var _a;\n            return schema.json(item, Object.assign(Object.assign({}, opts), { breadcrumbsPrefix: [...((_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : []), `[${index}]`] }));\n        }),\n        getType: () => Schema_1.SchemaType.LIST,\n    };\n    return Object.assign(Object.assign({}, (0, maybeSkipValidation_1.maybeSkipValidation)(baseSchema)), (0, schema_utils_1.getSchemaUtils)(baseSchema));\n}\nexports.list = list;\nfunction validateAndTransformArray(value, transformItem) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!Array.isArray(value)) {\n            return {\n                ok: false,\n                errors: [\n                    {\n                        message: (0, getErrorMessageForIncorrectType_1.getErrorMessageForIncorrectType)(value, \"list\"),\n                        path: [],\n                    },\n                ],\n            };\n        }\n        const maybeValidItems = yield Promise.all(value.map((item, index) => transformItem(item, index)));\n        return maybeValidItems.reduce((acc, item) => {\n            if (acc.ok && item.ok) {\n                return {\n                    ok: true,\n                    value: [...acc.value, item.value],\n                };\n            }\n            const errors = [];\n            if (!acc.ok) {\n                errors.push(...acc.errors);\n            }\n            if (!item.ok) {\n                errors.push(...item.errors);\n            }\n            return {\n                ok: false,\n                errors,\n            };\n        }, { ok: true, value: [] });\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}