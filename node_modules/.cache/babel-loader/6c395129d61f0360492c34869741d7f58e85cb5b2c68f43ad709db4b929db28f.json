{"ast":null,"code":"\"use strict\";\n\nvar __asyncValues = this && this.__asyncValues || function (o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n    i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n};\nvar __await = this && this.__await || function (v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n};\nvar __asyncGenerator = this && this.__asyncGenerator || function (thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n    i,\n    q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stream = void 0;\nclass Stream {\n  constructor({\n    stream,\n    parse,\n    terminator\n  }) {\n    this.stream = stream;\n    this.parse = parse;\n    this.terminator = terminator;\n  }\n  iterMessages() {\n    return __asyncGenerator(this, arguments, function* iterMessages_1() {\n      var e_1, _a;\n      let previous = \"\";\n      try {\n        for (var _b = __asyncValues(this.stream), _c; _c = yield __await(_b.next()), !_c.done;) {\n          const chunk = _c.value;\n          const bufferChunk = Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk);\n          previous += bufferChunk;\n          let terminatorIndex;\n          while ((terminatorIndex = previous.indexOf(this.terminator)) >= 0) {\n            const line = previous.slice(0, terminatorIndex).trimEnd();\n            const message = yield __await(this.parse(JSON.parse(line)));\n            yield yield __await(message);\n            previous = previous.slice(terminatorIndex + 1);\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) yield __await(_a.call(_b));\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    });\n  }\n  [Symbol.asyncIterator]() {\n    return __asyncGenerator(this, arguments, function* _a() {\n      var e_2, _b;\n      try {\n        for (var _c = __asyncValues(this.iterMessages()), _d; _d = yield __await(_c.next()), !_d.done;) {\n          const message = _d.value;\n          yield yield __await(message);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_b = _c.return)) yield __await(_b.call(_c));\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    });\n  }\n}\nexports.Stream = Stream;","map":{"version":3,"names":["__asyncValues","o","Symbol","asyncIterator","TypeError","m","i","call","__values","iterator","verb","n","v","Promise","resolve","reject","settle","done","value","d","then","__await","__asyncGenerator","thisArg","_arguments","generator","g","apply","q","a","b","push","resume","step","e","r","fulfill","f","shift","length","Object","defineProperty","exports","Stream","constructor","stream","parse","terminator","iterMessages","arguments","iterMessages_1","e_1","_a","previous","_b","_c","next","chunk","bufferChunk","Buffer","isBuffer","from","terminatorIndex","indexOf","line","slice","trimEnd","message","JSON","e_1_1","error","return","e_2","_d","e_2_1"],"sources":["D:/projects/InterviewCoachWeb/node_modules/cohere-ai/core/streaming-fetcher/Stream.js"],"sourcesContent":["\"use strict\";\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Stream = void 0;\nclass Stream {\n    constructor({ stream, parse, terminator, }) {\n        this.stream = stream;\n        this.parse = parse;\n        this.terminator = terminator;\n    }\n    iterMessages() {\n        return __asyncGenerator(this, arguments, function* iterMessages_1() {\n            var e_1, _a;\n            let previous = \"\";\n            try {\n                for (var _b = __asyncValues(this.stream), _c; _c = yield __await(_b.next()), !_c.done;) {\n                    const chunk = _c.value;\n                    const bufferChunk = Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk);\n                    previous += bufferChunk;\n                    let terminatorIndex;\n                    while ((terminatorIndex = previous.indexOf(this.terminator)) >= 0) {\n                        const line = previous.slice(0, terminatorIndex).trimEnd();\n                        const message = yield __await(this.parse(JSON.parse(line)));\n                        yield yield __await(message);\n                        previous = previous.slice(terminatorIndex + 1);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) yield __await(_a.call(_b));\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    [Symbol.asyncIterator]() {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var e_2, _b;\n            try {\n                for (var _c = __asyncValues(this.iterMessages()), _d; _d = yield __await(_c.next()), !_d.done;) {\n                    const message = _d.value;\n                    yield yield __await(message);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) yield __await(_b.call(_c));\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        });\n    }\n}\nexports.Stream = Stream;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}