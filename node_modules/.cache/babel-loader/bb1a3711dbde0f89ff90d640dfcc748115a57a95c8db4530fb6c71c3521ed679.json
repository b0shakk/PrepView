{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withParsedProperties = exports.getObjectLikeUtils = void 0;\nconst filterObject_1 = require(\"../../utils/filterObject\");\nconst getErrorMessageForIncorrectType_1 = require(\"../../utils/getErrorMessageForIncorrectType\");\nconst isPlainObject_1 = require(\"../../utils/isPlainObject\");\nconst schema_utils_1 = require(\"../schema-utils\");\nfunction getObjectLikeUtils(schema) {\n  return {\n    withParsedProperties: properties => withParsedProperties(schema, properties)\n  };\n}\nexports.getObjectLikeUtils = getObjectLikeUtils;\n/**\n * object-like utils are defined in one file to resolve issues with circular imports\n */\nfunction withParsedProperties(objectLike, properties) {\n  const objectSchema = {\n    parse: (raw, opts) => __awaiter(this, void 0, void 0, function* () {\n      const parsedObject = yield objectLike.parse(raw, opts);\n      if (!parsedObject.ok) {\n        return parsedObject;\n      }\n      const additionalProperties = Object.entries(properties).reduce((processed, [key, value]) => {\n        return Object.assign(Object.assign({}, processed), {\n          [key]: typeof value === \"function\" ? value(parsedObject.value) : value\n        });\n      }, {});\n      return {\n        ok: true,\n        value: Object.assign(Object.assign({}, parsedObject.value), additionalProperties)\n      };\n    }),\n    json: (parsed, opts) => {\n      var _a;\n      if (!(0, isPlainObject_1.isPlainObject)(parsed)) {\n        return {\n          ok: false,\n          errors: [{\n            path: (_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : [],\n            message: (0, getErrorMessageForIncorrectType_1.getErrorMessageForIncorrectType)(parsed, \"object\")\n          }]\n        };\n      }\n      // strip out added properties\n      const addedPropertyKeys = new Set(Object.keys(properties));\n      const parsedWithoutAddedProperties = (0, filterObject_1.filterObject)(parsed, Object.keys(parsed).filter(key => !addedPropertyKeys.has(key)));\n      return objectLike.json(parsedWithoutAddedProperties, opts);\n    },\n    getType: () => objectLike.getType()\n  };\n  return Object.assign(Object.assign(Object.assign({}, objectSchema), (0, schema_utils_1.getSchemaUtils)(objectSchema)), getObjectLikeUtils(objectSchema));\n}\nexports.withParsedProperties = withParsedProperties;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","withParsedProperties","getObjectLikeUtils","filterObject_1","require","getErrorMessageForIncorrectType_1","isPlainObject_1","schema_utils_1","schema","properties","objectLike","objectSchema","parse","raw","opts","parsedObject","ok","additionalProperties","entries","reduce","processed","key","assign","json","parsed","_a","isPlainObject","errors","path","breadcrumbsPrefix","message","getErrorMessageForIncorrectType","addedPropertyKeys","Set","keys","parsedWithoutAddedProperties","filterObject","filter","has","getType","getSchemaUtils"],"sources":["D:/projects/InterviewCoachWeb/node_modules/cohere-ai/core/schemas/builders/object-like/getObjectLikeUtils.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withParsedProperties = exports.getObjectLikeUtils = void 0;\nconst filterObject_1 = require(\"../../utils/filterObject\");\nconst getErrorMessageForIncorrectType_1 = require(\"../../utils/getErrorMessageForIncorrectType\");\nconst isPlainObject_1 = require(\"../../utils/isPlainObject\");\nconst schema_utils_1 = require(\"../schema-utils\");\nfunction getObjectLikeUtils(schema) {\n    return {\n        withParsedProperties: (properties) => withParsedProperties(schema, properties),\n    };\n}\nexports.getObjectLikeUtils = getObjectLikeUtils;\n/**\n * object-like utils are defined in one file to resolve issues with circular imports\n */\nfunction withParsedProperties(objectLike, properties) {\n    const objectSchema = {\n        parse: (raw, opts) => __awaiter(this, void 0, void 0, function* () {\n            const parsedObject = yield objectLike.parse(raw, opts);\n            if (!parsedObject.ok) {\n                return parsedObject;\n            }\n            const additionalProperties = Object.entries(properties).reduce((processed, [key, value]) => {\n                return Object.assign(Object.assign({}, processed), { [key]: typeof value === \"function\" ? value(parsedObject.value) : value });\n            }, {});\n            return {\n                ok: true,\n                value: Object.assign(Object.assign({}, parsedObject.value), additionalProperties),\n            };\n        }),\n        json: (parsed, opts) => {\n            var _a;\n            if (!(0, isPlainObject_1.isPlainObject)(parsed)) {\n                return {\n                    ok: false,\n                    errors: [\n                        {\n                            path: (_a = opts === null || opts === void 0 ? void 0 : opts.breadcrumbsPrefix) !== null && _a !== void 0 ? _a : [],\n                            message: (0, getErrorMessageForIncorrectType_1.getErrorMessageForIncorrectType)(parsed, \"object\"),\n                        },\n                    ],\n                };\n            }\n            // strip out added properties\n            const addedPropertyKeys = new Set(Object.keys(properties));\n            const parsedWithoutAddedProperties = (0, filterObject_1.filterObject)(parsed, Object.keys(parsed).filter((key) => !addedPropertyKeys.has(key)));\n            return objectLike.json(parsedWithoutAddedProperties, opts);\n        },\n        getType: () => objectLike.getType(),\n    };\n    return Object.assign(Object.assign(Object.assign({}, objectSchema), (0, schema_utils_1.getSchemaUtils)(objectSchema)), getObjectLikeUtils(objectSchema));\n}\nexports.withParsedProperties = withParsedProperties;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}